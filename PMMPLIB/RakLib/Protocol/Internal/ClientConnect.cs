using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using PMMPLIB.Utils.Linq;

namespace PMMPLIB.RakLib.Protocol.Internal
{
    public class ClientConnect : Packet
    {
        public byte GetID() { return 0x09; }

        public long ClientId { get; set; }
        public long SendPing { get; set; }
        public bool UseSecurity { get; set; }

        public void Encode(MemoryStream stream)
        {
            stream.WriteByte(GetID());
            stream.WriteInt64(ClientId);
            stream.WriteInt64BE(SendPing);
            stream.WriteByte((byte)(UseSecurity ? 0x01 : 0x00));
        }

        public void Decode(MemoryStream stream)
        {
            stream.ReadByte();//id
            ClientId = stream.ReadInt64();//umm...
            SendPing = stream.ReadInt64BE();
            UseSecurity = stream.ReadByte() == 0x01;
        }
    }
}
